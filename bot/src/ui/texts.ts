import { env } from '../config/env';

export const texts = {
  hero: [
    'Привет! Мы ежедневно собираем лучшие акции и промокоды из проверенных источников.',
    'Подписка даёт доступ в закрытый канал: самые выгодные предложения без шума и спама.',
    'Оплата безопасна — через YooKassa.',
  ].join('\n\n'),
  noPlans: 'Тарифов пока нет. Загляните позже — мы уже готовим лучшие варианты.',
  choosePlan: 'Выберите тариф — начните экономить уже сегодня:',
  paymentLink: 'Это защищённая ссылка YooKassa. После успешной оплаты пришлём персональную ссылку-приглашение в канал.',
  paymentCreateError: 'Не удалось создать платёж. Попробуйте ещё раз или напишите в поддержку.',
  needTerms: 'Чтобы продолжить, подтвердите согласие с условиями обслуживания и политикой.',
  statusNoSub: 'У вас пока нет активной подписки. Выберите тариф — подключение займёт минуту.',
  statusActive: (date: string, plan?: string) => `Подписка активна до ${date}. Тариф: ${plan ?? ''}.`,
  reinviteSent: (link: string) => `Ваша ссылка-приглашение: ${link}`,
  reinviteFail: 'Не удалось получить ссылку-приглашение. Попробуйте позже или обратитесь в поддержку.',
  acceptOk: 'Спасибо! Условия приняты. Выберите подходящий тариф.',
  acceptFail: 'Не удалось сохранить согласие. Попробуйте ещё раз.',
  cancelOk: 'Подписка отменена. Доступ останется до конца оплаченного периода.',
  cancelFail: 'Не удалось отменить подписку. Напишите в поддержку — поможем.',
  terms: (() => {
    const parts = [
      'Основные условия:',
      '• Доступ в закрытый канал с подборками скидок и промокодов',
      '• Безопасная оплата через YooKassa',
      '• Автопродление раз в месяц, можно отменить в любой момент командой /cancel',
      '• После оплаты приглашение приходит в личные сообщения от бота',
    ];
    if (env.MERCHANT_NAME) parts.push(`• Продавец (мерчант): ${env.MERCHANT_NAME}`);
    if (env.OFFER_URL) parts.push(`• Оферта: ${env.OFFER_URL}`);
    if (env.PRIVACY_URL) parts.push(`• Политика конфиденциальности: ${env.PRIVACY_URL}`);
    parts.push('', 'Нажимая «Согласен с условиями», вы подтверждаете, что ознакомлены с автопродлением и порядком отмены.');
    return parts.join('\n');
  })(),
  support: (u?: string) => `Поддержка: ${u ? '@' + u : 'укажите SUPPORT_USERNAME в .env'}`,
  confirmPlan: (name: string, firstCharge: string, period: string, nextCharge: string) => [
    `Тариф: ${name}`,
    `Первый платёж: ${firstCharge} (${period})`,
    `Далее: ${nextCharge} / месяц, автопродление`,
    'Отменить можно в любой момент: /cancel',
    env.MERCHANT_NAME ? `Мерчант: ${env.MERCHANT_NAME}` : undefined,
  ].filter(Boolean).join('\n'),
};
